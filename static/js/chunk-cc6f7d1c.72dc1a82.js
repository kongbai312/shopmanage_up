(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cc6f7d1c"],{a15b:function(e,t,n){"use strict";var r=n("23e7"),i=n("44ad"),s=n("fc6a"),o=n("a640"),a=[].join,l=i!=Object,c=o("join",",");r({target:"Array",proto:!0,forced:l||!c},{join:function(e){return a.call(s(this),void 0===e?",":e)}})},b5ab:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-input",{attrs:{disabled:"",value:e.$route.query.roleName}}),n("el-tree",{ref:"tree",staticStyle:{margin:"20px 0"},attrs:{data:e.allPermissions,"node-key":"id","show-checkbox":"","default-expand-all":"",props:e.defaultProps}}),n("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.save}},[e._v("保存")]),n("el-button",{on:{click:function(t){return e.$router.replace({name:"Role"})}}},[e._v("取消")])],1)},i=[],s=(n("a15b"),n("ac1f"),n("5319"),n("caad"),n("2532"),{name:"roleAuth",data:function(){return{loading:!1,allPermissions:[],defaultProps:{children:"children",label:"name"}}},created:function(){this.init()},methods:{init:function(){var e=this.$route.params.id;this.getPermissions(e)},getPermissions:function(e){var t=this;this.$API.permission.toAssign(e).then((function(e){var n=e.data.children;t.allPermissions=n;var r=t.getCheckedIds(n);t.$refs.tree.setCheckedKeys(r)}))},getCheckedIds:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.reduce((function(e,r){return r.select&&4===r.level?e.push(r.id):r.children&&t.getCheckedIds(r.children,n),e}),n)},save:function(){var e=this,t=this.$refs.tree.getCheckedKeys().join(",");this.loading=!0,this.$API.permission.doAssign(this.$route.params.id,t).then((function(t){e.loading=!1,e.$message.success(t.$message||"分配权限成功");var n=e.$route.query.roleName,r=e.$store.getters.roles;e.$router.replace("/acl/role/list",(function(){console.log("replace onComplete"),r.includes(n)&&window.location.reload()}))}))}}}),o=s,a=n("2877"),l=Object(a["a"])(o,r,i,!1,null,null,null);t["default"]=l.exports}}]);