(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d224d40"],{e296:function(e,i,t){"use strict";t.r(i);var s=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",[t("el-table",{staticStyle:{"margin-bottom":"20px"},attrs:{border:"",data:e.menuPermissionList,"expand-row-keys":e.expandKeys,"row-key":"id"}},[t("el-table-column",{attrs:{prop:"name",label:"名称"}}),t("el-table-column",{attrs:{prop:"code",label:"权限值"}}),t("el-table-column",{attrs:{prop:"toCode",label:"跳转权限值"}}),t("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(i){var s=i.row;return[t("HintButton",{attrs:{disabled:4===s.level,type:"primary",icon:"el-icon-plus",size:"mini",title:e.getAddTitle(s.level)},on:{click:function(i){return e.toAddPermission(s)}}}),t("HintButton",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini",disabled:1===s.level,title:4===s.level?"修改功能":"修改菜单"},on:{click:function(i){return e.toUpdatePermission(s)}}}),t("HintButton",{attrs:{disabled:1===s.level,type:"danger",icon:"el-icon-delete",size:"mini",title:"删除"},on:{click:function(i){return e.removePermission(s)}}})]}}])})],1),t("el-dialog",{attrs:{visible:e.dialogPermissionVisible,title:e.dialogTitle},on:{"update:visible":function(i){e.dialogPermissionVisible=i},close:e.resetData}},[t("el-form",{ref:"permission",attrs:{model:e.permission,rules:e.permissionRules,"label-width":"120px"}},[e.permission.level>2&&!e.permission.id?t("el-form-item",{attrs:{label:"父级名称"}},[t("el-input",{attrs:{value:e.permission.pname,disabled:""}})],1):e._e(),t("el-form-item",{attrs:{label:"名称",prop:"name"}},[t("el-input",{model:{value:e.permission.name,callback:function(i){e.$set(e.permission,"name",i)},expression:"permission.name"}})],1),t("el-form-item",{attrs:{label:"功能权限值",prop:"code"}},[t("el-input",{model:{value:e.permission.code,callback:function(i){e.$set(e.permission,"code",i)},expression:"permission.code"}})],1),4===e.permission.level?t("el-form-item",{attrs:{label:"跳转路由权限值",prop:"toCode"}},[t("el-input",{model:{value:e.permission.toCode,callback:function(i){e.$set(e.permission,"toCode",i)},expression:"permission.toCode"}})],1):e._e()],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:e.resetData}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.addOrUpdatePermission}},[e._v("确 定")])],1)],1)],1)},n=[];t("a4d3"),t("b64b");function r(e,i){if(null==e)return{};var t,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)t=r[s],i.indexOf(t)>=0||(n[t]=e[t]);return n}function o(e,i){if(null==e)return{};var t,s,n=r(e,i);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)t=o[s],i.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}var a=t("5530"),l=t("1da1"),m=(t("b0c0"),t("96cf"),["pname"]),c={name:[{required:!0,message:"名称必须输入"}],code:[{required:!0,message:"权限值必须输入"}]},u={name:[{required:!0,message:"名称必须输入"}],code:[{required:!0,trigger:"blur",message:"功能权限值必须输入"}]},p={name:"PermissionList",data:function(){return{menuPermissionList:[],expandKeys:[],dialogPermissionVisible:!1,permission:{level:0,name:"",code:"",toCode:""}}},computed:{dialogTitle:function(){var e=this.permission,i=e.id,t=e.level;return i?4===t?"修改功能":"修改菜单":4===t?"添加功能":"添加".concat(2===t?"一级":"二级","菜单")},permissionRules:function(){return 4===this.permission.level?u:c}},mounted:function(){this.fetchPermissionList()},methods:{getAddTitle:function(e){return 1===e||2===e?"添加菜单":3===e?"添加功能":void 0},fetchPermissionList:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function i(){var t;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,e.$API.permission.getPermissionList();case 2:t=i.sent,e.menuPermissionList=t.data.children,e.expandKeys=[e.menuPermissionList[0].id];case 5:case"end":return i.stop()}}),i)})))()},toAddPermission:function(e){var i=this;this.dialogPermissionVisible=!0,this.permission.pid=e.id,this.permission.level=e.level+1,this.permission.type=4===this.permission.level?2:1,this.permission.pname=e.name,this.$nextTick((function(){return i.$refs.permission.clearValidate()}))},toUpdatePermission:function(e){var i=this;this.dialogPermissionVisible=!0,this.permission=Object(a["a"])({},e),this.permission.type=4===this.permission.level?2:1,this.$nextTick((function(){return i.$refs.permission.clearValidate()}))},removePermission:function(e){var i=this;this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{type:"warning"}).then(Object(l["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i.$API.permission.removePermission(e.id);case 2:s=t.sent,i.$message.success(s.message||"删除成功!"),i.fetchPermissionList();case 5:case"end":return t.stop()}}),t)})))).catch((function(e){"cancel"===e&&i.$message({type:"info",message:"已取消删除"})}))},addOrUpdatePermission:function(){var e=this;this.$refs.permission.validate(function(){var i=Object(l["a"])(regeneratorRuntime.mark((function i(t){var s,n,r;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(!t){i.next=8;break}return s=e.permission,s.pname,n=o(s,m),i.next=4,e.$API.permission[n.id?"updatePermission":"addPermission"](n);case 4:r=i.sent,e.$message.success(r.message||"".concat(n.id?"修改":"添加","成功!")),e.resetData(),e.fetchPermissionList();case 8:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}())},resetData:function(){this.dialogPermissionVisible=!1,this.permission={level:0,name:"",code:"",toCode:""}}}},d=p,f=t("2877"),b=Object(f["a"])(d,s,n,!1,null,null,null);i["default"]=b.exports}}]);