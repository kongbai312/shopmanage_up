(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7bfb554f"],{"43e5":function(e,t,a){"use strict";a("cc55")},cc55:function(e,t,a){},fdf3:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.showAddDialog}},[e._v("添加")]),a("el-table",{staticStyle:{width:"100%",margin:"20px 0"},attrs:{data:e.trademarkList,border:""}},[a("el-table-column",{attrs:{align:"center",label:"序号",width:"80",type:"index"}}),a("el-table-column",{attrs:{prop:"tmName",label:"品牌名称",width:"width"}}),a("el-table-column",{attrs:{label:"品牌LOGO",width:"width"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;e.$index;return[a("img",{staticStyle:{width:"80px",height:"80px"},attrs:{src:t.logoUrl,alt:""}})]}}])}),a("el-table-column",{attrs:{label:"操作",width:"width"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;t.$index;return[a("el-button",{attrs:{type:"warning",icon:"el-icon-edit",size:"mini"},on:{click:function(t){return e.showUpdateDialog(r)}}},[e._v("修改")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(t){return e.deleteTrademark(r)}}},[e._v("删除")])]}}])})],1),a("el-pagination",{staticStyle:{"text-align":"center"},attrs:{"current-page":e.page,"page-sizes":[3,5,7],"page-size":e.limit,layout:"prev, pager, next, jumper,->,sizes,total",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.getTrademarkList}}),a("el-dialog",{attrs:{title:e.tmForm.id?"修改品牌":"添加品牌",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"tmForm",staticStyle:{width:"80%"},attrs:{model:e.tmForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"品牌名称","label-width":"100px",prop:"tmName"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.tmForm.tmName,callback:function(t){e.$set(e.tmForm,"tmName",t)},expression:"tmForm.tmName"}})],1),a("el-form-item",{attrs:{label:"品牌LOGO","label-width":"100px",prop:"logoUrl"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/dev-api/admin/product/fileUpload","show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.tmForm.logoUrl?a("img",{staticClass:"avatar",attrs:{src:e.tmForm.logoUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addOrUpdate}},[e._v("确 定")])],1)],1)],1)},i=[],n=a("5530"),o=a("1da1"),s=(a("96cf"),{name:"Trademark",data:function(){var e=function(e,t,a){t.length<2||t.length>10?a(new Error("请输入2~10位的品牌名称")):a()};return{page:1,limit:3,trademarkList:[],total:0,dialogFormVisible:!1,tmForm:{tmName:"",logoUrl:""},rules:{tmName:[{required:!0,message:"请输入品牌名称",trigger:"blur"},{validator:e,trigger:"change"}],logoUrl:[{required:!0,message:"请上传图片",trigger:"blur"}]}}},mounted:function(){this.getTrademarkList()},methods:{getTrademarkList:function(){var e=arguments,t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.length>0&&void 0!==e[0]?e[0]:1,t.page=r,a.next=4,t.$API.trademark.getPageList(t.page,t.limit);case 4:i=a.sent,200===i.code?(t.trademarkList=i.data.records,t.total=i.data.total):t.$message.error("请求出错");case 6:case"end":return a.stop()}}),a)})))()},handleSizeChange:function(e){this.limit=e,this.getTrademarkList()},handleAvatarSuccess:function(e,t){this.tmForm.logoUrl=e.data},beforeAvatarUpload:function(e){var t=["image/jpeg","image/png"],a=e.size/1024/1024<2,r=-1!==t.indexOf(e.type);return r||this.$message.error("上传头像图片只能是 JPG或PNG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),r&&a},showAddDialog:function(){this.dialogFormVisible=!0,this.tmForm={tmName:"",logoUrl:""}},showUpdateDialog:function(e){this.dialogFormVisible=!0,this.tmForm=Object(n["a"])({},e)},addOrUpdate:function(){var e=this;this.$refs.tmForm.validate(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=16;break}return r=e.tmForm,t.prev=2,t.next=5,e.$API.trademark.addOrUpdate(r);case 5:t.sent,e.$message.success(r.id?"修改品牌成功":"添加品牌成功"),e.dialogFormVisible=!1,e.getTrademarkList(r.id?e.page:1),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](2),e.$message.error(r.id?"修改品牌失败":"添加品牌失败");case 14:t.next=18;break;case 16:return console.log("校验失败，不提交"),t.abrupt("return",!1);case 18:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e){return t.apply(this,arguments)}}())},deleteTrademark:function(e){var t=this;this.$confirm("是否要删除".concat(e.tmName),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$API.trademark.delete(e.id);case 3:t.$message({type:"success",message:"删除成功!"}),t.getTrademarkList(t.trademarkList.length>1?t.page:t.page-1),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),t.$message.error("删除失败");case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))).catch((function(){t.$message({type:"info",message:"已取消删除"})}))}}}),l=s,c=(a("43e5"),a("2877")),m=Object(c["a"])(l,r,i,!1,null,null,null);t["default"]=m.exports}}]);